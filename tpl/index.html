<!--
/*
 * Shareloc - the free and open map API
 *
 * Copyright (c) 2015-2016 meggsimum, Christian Mayer (http://www.meggsimum.de)
 * Published under the BSD license.
 * See https://github.com/meggsimum/shareloc/blob/master/LICENSE for the full
 * text of the license.
 */
-->
<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link rel="stylesheet" type="text/css" href="http://fonts.googleapis.com/css?family=Fjalla One">

    <!-- @if NODE_ENV='develop' -->
    <link rel="stylesheet" href="./node_modules/openlayers/dist/ol.css" type="text/css">
    <link rel="stylesheet" href="./node_modules/bootstrap/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="./res/css/api-creator.css">

    <script src="./node_modules/openlayers/dist/ol.js" type="text/javascript"></script>
    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="./node_modules/jquery/dist/jquery.min.js"></script>
    <script src="./node_modules/bootstrap/dist/js/bootstrap.min.js"></script>
    <!-- @endif -->

    <!-- @if NODE_ENV='production' -->
    <link rel="stylesheet" href="./res/css/Shareloc-creator.css">
    <!-- @endif -->

    <link rel="stylesheet" href="http://netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap-glyphicons.css">

    <title>Shareloc RLP</title>
  </head>
  <body>
    <div id="map">
    </div>
    <a id="app-logo" href="http://www.meggsimum.de/"
        title="Shareloc by meggsimum - WebGIS and more" target="_blank">
        <img alt="www.meggsimim.de" src="./res/img/meggsimum.png">
    </a>
    <div id="show-ui">
      <button id="list-btn" type="button" class="btn btn-s btn-primary" title="Menü einblenden, um Shareloc Link zu generieren">
          <span class="glyphicon glyphicon-th-list"></span>
      </button>
    </div>
    <div id="sidebar">
        <button type="button" class="btn btn-s close-x-btn close-ui" data-dismiss="sidebar" title="Menü schließen">
            <span class="glyphicon glyphicon-remove"></span>
        </button>
        <button type="button" id="geolocation-btn" class="btn btn-s close-x-btn geolocation" title="Eigene Position auf der Karte anzeigen">
            <span class="glyphicon glyphicon-screenshot"></span>
        </button>
        <div class="panel panel-primary">
            <div class="panel-heading primary shareloc-header">
              <span class="shareloc-title" style="margin-left: 45px;">Shareloc RLP</span>
            </div>
        </div>

        <!-- Tab definitions -->
        <ul id="tabs" class="nav nav-tabs" data-tabs="tabs">
            <li class="active"><a href="#layers" class="tool-tab" data-toggle="tab" localize>Karten <span class="glyphicon glyphicon-align-justify"></span></a></li>
            <li><a href="#marker" class="tool-tab" data-toggle="tab">Marker <span class="glyphicon glyphicon-map-marker"></a></li>
            <li><a href="#code" class="tool-tab" data-toggle="tab">Teilen <span class="glyphicon glyphicon-share"></a></li>
            <li><a href="#info" class="tool-tab" data-toggle="tab">Info <span class="glyphicon glyphicon-info-sign"></a></li>
        </ul>
        <div id="my-tab-content" class="tab-content">
            <div class="tab-pane active" id="layers">
                <ul class="list-group"></ul>
            </div>
            <div class="tab-pane" id="marker">
               <ul class="list-group">
                <li class="list-group-item">
                    Setze Marker durck Click auf die Karte.
                    <p id="marker-x"></p>
                    <p id="marker-y"></p>
                    <textarea id="popuptext" class="form-control" rows="3" placeholder="Tippe hier für Popup-Text..."></textarea>
                </li>
              </ul>
            </div>

            <div class="tab-pane" id="code">
              <ul class="list-group">
                <li id="embed-pl" class="list-group-item">
                    <a class="btn btn-default pl-link" href="" target="_blank">
                        <span class="glyphicon glyphicon-link"></span> Link</a>
                    <a class="btn btn-default pl-mail" href="" target="_blank">
                        <span class="glyphicon glyphicon-envelope"></span> Mail</a>
                </li>
                <li id="embed-iframe" class="list-group-item"></li>
              </ul>
            </div>

            <div class="tab-pane" id="info">
              <ul class="list-group">
                <li class="list-group-item">
                  <span class="shareloc-title">Shareloc</span> ist eine offene
                  und freie Karten-API, um OpenLayers 3-basierte Webkarten
                  (sog. "Slippy Maps") einfach zu generieren und zu teilen.
                  <a href="http://meggsimum.de/?page_id=272">Mehr Informationen...</a>
                  <br><br>
                  Idee, Entwicklung und Hosting durch <a href="http://meggsimum.de/">meggsimum</a>.
                  Shareloc ist Open Source unter der BSD Lizenz veröffentlicht.
                  Der Code steht
                  <a href="https://github.com/meggsimum/shareloc" target="_blank">hier</a>
                  zur Verfügung.
                  <h4>Credits</h4>
                  Danke an alle, die freie Kartendienste bereitstellen.
                  In dieser konkreten Anwendung die
                  <a href="http://www.lvermgeo.rlp.de">Vermessungs- und Katasterverwaltung Rheinland-Pfalz</a>
                  <br>
                  Für alle hier gezeigten Karten gilt<pre>©GeoBasis-DE / LVermGeoRP 2016, dl-de/by-2-0, http://www.lvermgeo.rlp.de</pre>
                </li>
              </ul>
            </div>

        </div>
    </div>

    <div style="display: none;">
      <!-- Popup -->
      <div id="popup" title="" style="padding-top: -30px;">
      </div>
    </div>

    <!-- @if NODE_ENV='develop' -->
    <script src="src/shareloc.js" type="text/javascript"></script>
    <script src="src/layers.js" type="text/javascript"></script>
    <script src="src/map-api.js" type="text/javascript"></script>
    <script src="src/permalink.js" type="text/javascript"></script>
    <script src="src/api-creator-app.js" type="text/javascript"></script>
    <!-- @endif -->

    <!-- @if NODE_ENV='production' -->
    <script src="src/Shareloc-creator.min.js" type="text/javascript"></script>
    <!-- @endif -->

    <script type="text/javascript">
      var pl = new Shareloc.Permalink(window.location),
          params;
      if (pl.hasHash()) {
          hashObj = pl.getHashObject();
          params = hashObj;
      } else {
          params = {};
      }

      var api = new Shareloc.MapApi();
      var olMap = api.map(params);
      new Shareloc.ApiCreatorApp(olMap);

      // sizes the map to fullscreen
      var resizeMap2WinSize = function() {
          var wh = $(window).height();
          $('#map').css("height", wh + 'px');
          olMap.updateSize();
      }
      //get optimal size for the map
      $(document).ready(resizeMap2WinSize);
      $(window).resize(resizeMap2WinSize);
    </script>
  </body>
</html>
